<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Checkout | Fairytale Dress</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body {
    font-family: 'Poppins', sans-serif;
    margin:0;
    background:#FFFDFB;
    color:#5A3A44;
}

/* ===== NAVBAR ===== */
.navbar {
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:18px 40px;
    background:#E8B7C8;
    color:#5A3A44;
    box-shadow:0 4px 15px rgba(201,122,149,0.25);
    font-weight:600;
}
.logo {
    display:flex;
    align-items:center;
    gap:10px;
    font-size:1.4rem;
    font-weight:700;
}
.logo img {
    width:90px;
    height:90px;
    object-fit:contain;
    border-radius:5px;
}
.nav-links {
    list-style:none;
    display:flex;
    gap:25px;
    align-items:center;
    margin:0;
    padding:0;
}
.nav-links a {
    color:#5A3A44;
    text-decoration:none;
    font-weight:600;
    transition:0.3s;
}
.nav-links a:hover,
.nav-links a.active {
    color:#C97A95;
    border-bottom:2px solid #C97A95;
}
.cart-icon {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    cursor: pointer;
}
.cart-icon img {
    width: 28px;
    height: 28px;
    object-fit: contain;
    transition: transform 0.3s;
}
.cart-icon:hover img {
    transform: scale(1.1);
}
.cart-badge {
    position: absolute;
    top: -8px;
    right: -8px;
    background:#C97A95;
    color:#fff;
    font-size:0.75rem;
    font-weight:700;
    padding:2px 6px;
    border-radius:12px;
    text-align:center;
}

/* ===== CHECKOUT LAYOUT ===== */
.checkout-container {
    display:flex;
    flex-wrap:wrap;
    max-width:1050px;
    margin:60px auto;
    gap:35px;
}
.checkout-left,
.checkout-right {
    flex:1;
    min-width:320px;
    background:#fff;
    padding:35px;
    border-radius:28px;
    box-shadow:0 18px 40px rgba(201,122,149,0.18);
}
.checkout-left h2,
.checkout-right h3 { color:#C97A95; margin-bottom:20px; }

/* ===== FORM ===== */
input,
textarea,
select {
    width:100%;
    padding:14px;
    margin:8px 0 18px;
    border-radius:30px;
    border:1px solid #E6C1CE;
    font-size:0.95rem;
    outline:none;
}
input:focus,
textarea:focus,
select:focus {
    border-color:#C97A95;
}
#customerNote { min-height:80px; resize: vertical; }

/* ===== BUTTON ===== */
button,
.btn-primary {
    display:block;
    width:100%;
    padding:15px;
    border-radius:30px;
    border:none;
    cursor:pointer;
    font-weight:600;
    margin-top:12px;
    background:#C97A95;
    color:#fff;
    transition:0.3s;
}
button:hover,
.btn-primary:hover { background:#B5677F; }

/* ===== ORDER SUMMARY ===== */
.order-items { margin-bottom:25px; }
.summary { border-top:1px solid #F5D6E3; padding-top:18px; }
.summary-row { display:flex; justify-content:space-between; margin:8px 0; color:#7A4A5C; }
.total-row { font-weight:700; font-size:1.1rem; color:#C97A95; }
.secure-text { margin-top:15px; font-size:0.9rem; color:#7A4A5C; }

/* ===== FOOTER ===== */
footer { text-align:center; padding:22px; color:#5A3A44; font-weight:500; }

/* ===== TOAST MESSAGE ===== */
#toast {
    visibility: hidden; 
    min-width: 250px;
    max-width: 320px;
    margin-left: -160px;
    background: linear-gradient(135deg, #FFC1CC, #FFD6E0);
    color: #5A3A44;
    font-weight: 600;
    text-align: center;
    border-radius: 20px;
    padding: 16px;
    position: fixed;
    z-index: 9999;
    left: 50%;
    bottom: 30px;
    font-family: 'Poppins', sans-serif;
    box-shadow: 0 6px 18px rgba(201,122,149,0.3);
    transform: translateY(20px);
    opacity: 0;
    transition: opacity 0.5s ease, transform 0.5s ease;
}
#toast.show {
    visibility: visible;
    opacity: 1;
    transform: translateY(0);
}
.toast-sparkle {
    display:inline-block;
    animation: sparkle 1s ease forwards;
    margin-left:5px;
    font-size:1.2rem;
}
@keyframes sparkle {
    0% {transform: scale(0.8) rotate(0deg); opacity:0;}
    50% {transform: scale(1.2) rotate(20deg); opacity:1;}
    100% {transform: scale(1) rotate(-10deg); opacity:0;}
}

/* ===== RESPONSIVE ===== */
@media(max-width:800px){
    .checkout-container { flex-direction:column; }
}
</style>
</head>

<body>

<!-- ===== NAVBAR ===== -->
<nav class="navbar">
  <div class="logo">
    <img src="fairytale2.jpg" alt="Fairytale Logo">
    Fairytale Dress
  </div>
  <ul class="nav-links">
    <li><a href="index.html">Home</a></li>
    <li><a href="collection.html">Collection</a></li>
    <li>
      <a href="cart.html" class="cart-icon" title="Cart">
        <img src="cart.jpg" alt="Cart">
        <span class="cart-badge" id="cart-count">0</span>
      </a>
    </li>
  </ul>
</nav>

<!-- ===== CHECKOUT ===== -->
<div class="checkout-container">

  <!-- CUSTOMER INFO -->
  <div class="checkout-left">
    <h2>Checkout</h2>
    <p class="subtitle">Complete your order securely</p>

    <label>Full Name</label>
    <input type="text" id="customerName" placeholder="Enter your full name" required>

    <label>Phone Number</label>
    <input type="tel" id="customerPhone" placeholder="+968 XXXXXXXX" required>

    <label>Delivery Address</label>
    <textarea id="customerAddress" placeholder="Street, City, Country" required></textarea>

    <label>Note for Seller (Optional)</label>
    <textarea id="customerNote" placeholder="Any instructions or special requests"></textarea>

    <h3>Payment Method</h3>
    <div class="payment-box">
      <input type="radio" checked> Credit / Debit Card (Stripe)
    </div>

    <button class="btn-primary" onclick="sendOrderEmail()">Place Order</button>
  </div>

  <!-- ORDER SUMMARY -->
  <div class="checkout-right">
    <h3>Your Order</h3>
    <div id="cartItems" class="order-items"></div>

    <div class="summary">
      <div class="summary-row"><span>Subtotal</span><span>$<span id="total">0</span></span></div>
      <div class="summary-row"><span>Delivery</span><span>Free</span></div>
      <div class="summary-row total-row"><span>Total</span><span>$<span id="finalTotal">0</span></span></div>
    </div>

    <p class="secure-text">ðŸ”’ Secure checkout â€¢ SSL protected</p>
  </div>

</div>

<!-- TOAST -->
<div id="toast"></div>

<footer>
  <p>Â© 2026 Fairytale Dress. All Rights Reserved.</p>
</footer>

<script>
// ===== CART =====
const cartCountBadge = document.getElementById("cart-count");
let cart = JSON.parse(localStorage.getItem("cart")) || [];
cartCountBadge.textContent = cart.length;

// Render cart items
function renderCart() {
    const cartItemsDiv = document.getElementById("cartItems");
    const totalSpan = document.getElementById("total");
    const finalTotalSpan = document.getElementById("finalTotal");

    cartItemsDiv.innerHTML = "";
    let total = 0;
    cart.forEach(item => {
        total += Number(item.price);
        const div = document.createElement("div");
        div.innerHTML = `â€¢ ${item.name} (${item.size}) - $${item.price}`;
        cartItemsDiv.appendChild(div);
    });
    totalSpan.innerText = total;
    finalTotalSpan.innerText = total;
}
renderCart();

// ===== TOAST =====
function showToast(message) {
    const toast = document.getElementById("toast");
    toast.innerHTML = message + ' <span class="toast-sparkle">âœ¨</span>';
    toast.className = "show";
    setTimeout(() => { toast.className = toast.className.replace("show",""); }, 3000);
}

// ===== CHECK LOGIN =====
const currentUser = JSON.parse(localStorage.getItem("currentUser"));
if(!currentUser){
    showToast("âŒ Please register or login first!");
    setTimeout(() => { window.location.href = "register.html"; }, 1500);
}

// ===== SEND ORDER =====
function sendOrderEmail() {
    const name = document.getElementById("customerName").value;
    const phone = document.getElementById("customerPhone").value;
    const address = document.getElementById("customerAddress").value;
    const note = document.getElementById("customerNote").value;

    if(!name || !phone || !address){
        showToast("âŒ Please fill all your details!");
        return;
    }
    if(cart.length === 0){
        showToast("âŒ Your cart is empty!");
        return;
    }

    // Example: email sending via EmailJS (replace YOUR_SERVICE_ID and YOUR_TEMPLATE_ID)
    // const templateParams = {...};

    showToast("âœ… Order placed successfully!");
    localStorage.removeItem("cart");
    setTimeout(() => { window.location.href = "index.html"; }, 1500);
}
</script>

</body>
</html>


